<html>
<title>Events Viewer</title>
<head>
  <!-- jQuery -->

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>


  <link href='//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css' rel='stylesheet' type='text/css'>
  <script src='//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js'></script>
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/dt/dt-1.10.18/datatables.min.css"/>

  <script type="text/javascript" src="https://cdn.datatables.net/v/dt/dt-1.10.18/datatables.min.js"></script>

<script>
   var stream_position = sessionStorage.getItem("streamPosition");

  $(document).ready(function() {
    var t = $('#contentlist').DataTable({
        "select": true,
        "dom": "Bfrtip",
        "pageLength": 5,
        "ajax":{
          "url": "https://api.box.com/2.0/events?stream_position=" + stream_position,
          "type": "GET",
          "dataSrc": "entries",
          "headers": {"Authorization": "Bearer " + sessionStorage.getItem("accessToken")
          }
        },
        "columns": [
          {
            "data": "event_type"
          },
          {
            "data": "created_at"
          },
          {
            "data":null,
              render: function(data, type, row) {
                return row.source.name;
            }
          }
        ]});

  });



</script>

</head>

<body>
  <table id="contentlist" class="display" style="width:100%">
      <thead>
          <th>Event</th>
          <th>Created</th>
          <th>Name</th>
        </thead>
        <tbody>
        </tbody>

          </table>
  </body>
</html>
